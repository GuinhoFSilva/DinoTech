<!DOCTYPE html>
<html lang="en">

<head>
    

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/png" href="./assets/skull.png" sizes="16x16">

    <title>DinoTech | Início</title>

</head>

<body class="quiz">
    <header>
        <div class="container">
        <h1 class="titulo"><a href="#">DinoTech</a></h1>
           <ul class="navbar">
            <li><a href="index.html">Home</a></li>
            <li><a href="curiosidades.html">Curiosidades </a></li>
            <li><a href="especies.html">Espécies</a></li>
            <li><a href="recomendacoes.html">Recomendações</a></li>
            <li>|</li>
            <li class="atual"><a href="#">Quiz</a></li>
            <li><a href="extincao.html">Extinção</a></li>
            <li><a href="login.html">Logar</a></li>
            <li><a href="cadastro.html">Cadastrar</a></li>
           </ul>
        </div>
    </header>
    
    
    <div class="container-quiz">
        <div class="aparecer-box" id="divaparecer">
        <div class="box-questao">
            <div class="conteudo">
                <span class="questao">Perguntinha</span>
                <div class="box-respostas">
                    <button class="respostas button">Reposta1</button>
                    <button class="respostas button">Reposta2</button>
                    <button class="respostas button">Reposta3</button>
                    <button class="respostas button">Reposta4</button>
                </div>
                <div class="mensagemFinal" id="divmsg"></div>
            </div>
        </div>
        </div>
            <div class="box-proxima">
                <button class="comecar-quiz button" onclick="comecar('divaparecer')">Começar Quiz</button>
                <button class="finalizar-quiz button" onclick="refazer()">Refazer Quiz</button>
            </div>
    </div>
</body>
</html>
<script>
    var botaoStart = document.querySelector(".comecar-quiz")
    var botaoEnd = document.querySelector(".finalizar-quiz")
    var containerRespostas = document.querySelector(".box-respostas")
    var textoQuestao = document.querySelector(".questao")
    var questaoAtual = 0;
    var questoesCorretas = 0;

    botaoEnd.style.display = 'none'
    function comecar(){
        var aparecer = document.getElementById('divaparecer').style.display;

        if(aparecer == 'none'){
            document.getElementById('divaparecer').style.display = 'block'
            botaoStart.style.display = 'none'
            botaoEnd.style.display = 'block'
        }else{
            document.getElementById('divaparecer').style.display = 'none'
        }

        proximaQuestao()

    }

    function proximaQuestao(){

        if(questoes.length == questaoAtual){
            return terminar()
        }


        while(containerRespostas.firstChild) {
            containerRespostas.removeChild(containerRespostas.firstChild)
        }


        textoQuestao.textContent = questoes[questaoAtual].questao
        questoes[questaoAtual].respostas.forEach(respostas => {
            var novaResposta = document.createElement("button")
            novaResposta.classList.add("button", "respostas")
            novaResposta.textContent = respostas.text
            if(respostas.correct){
                novaResposta.dataset.correct = respostas.correct
            }
            containerRespostas.appendChild(novaResposta)

            novaResposta.addEventListener("click", selecionarResposta)
        })
  
    }


    function selecionarResposta(event){
        var respostaClicada = event.target

        if(respostaClicada.dataset.correct){
            questoesCorretas++
        }



        document.querySelectorAll(".respostas").forEach(button => {
            if(button.dataset.correct){
                button.classList.add("correto")
            }else{
                button.classList.add("incorreto")
            }
            button.disabled = true
        })
            setTimeout(() => {
                proximaQuestao()
            }, 1500);
            questaoAtual++
    }

    function terminar(){
        var questoesTotais = questoes.length
        var performance = Math.floor(questoesCorretas * 100 / questoesTotais)
        var mensagem = ""  
       
        if(performance >= 90){
            mensagem = `Você acertou um total de: ${questoesCorretas} perguntas!
                        sua performance foi de ${performance}%, parabéns :D`
        }else if(performance >= 60){
            mensagem = `Você acertou um total de: ${questoesCorretas} perguntas!
                        sua performance foi de ${performance}%, foi bem`
        }else{
            mensagem = `Você acertou um total de: ${questoesCorretas} pergunta(s)!
                        sua performance foi de ${performance}%, poderia ter ido melhor :(`
        }
 

        divmsg.innerHTML = mensagem

    }

    function refazer(){
        terminar()
        setTimeout(() => {
        window.location.reload()
            
        }, 3000);
    }






var questoes = [
{
    questao: "Há quantos anos os dinossauros foram extintos?",
    respostas: [
        {text: "45 milhões de anos", correct: false},
        {text: "63 milhões de anos", correct: false},
        {text: "66 milhões de anos", correct: true},
        {text: "65 mil anos", correct: false},
    ]
},

{
    questao: "Segunda pergunta",
    respostas: [
        {text: "Resposta1", correct: true},
        {text: "Resposta2", correct: false},
        {text: "Resposta3", correct: false},
        {text: "Resposta4", correct: false},
    ]
},

{
    questao: "Terceira pergunta",
    respostas: [
        {text: "Resposta1", correct: false},
        {text: "Resposta2", correct: false},
        {text: "Resposta3", correct: false},
        {text: "Resposta4", correct: true},
    ]
},

{
    questao: "Quarta pergunta",
    respostas: [
        {text: "Resposta1", correct: false},
        {text: "Resposta2", correct: true},
        {text: "Resposta3", correct: false},
        {text: "Resposta4", correct: false},
    ]
},
]
</script>