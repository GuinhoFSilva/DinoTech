<!DOCTYPE html>
<html lang="en">

<head>
    

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/style.css">
    <link rel="icon" type="image/png" href="./assets/skull.png" sizes="16x16">
    <script src="./js/scriptVerificar.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


    <title>DinoTech | Início</title>

</head>

<body class="quiz" onload="carregarKPIs()"> 
    <header>
        <div class="container">
        <h1 class="titulo"><a href="index.html">DinoTech</a></h1>
           <ul class="navbar">
            <li><a href="index.html">Home</a></li>
            <li><a href="curiosidades.html">Curiosidades </a></li>
            <li><a href="especies.html">Espécies</a></li>
            <li><a href="recomendacoes.html">Recomendações</a></li>
            <li>|</li>
            <li><a href="extincao.html">Extinção</a></li>
            <div id="divquiz">
            <li><a href="quiz.html">Quiz</a></li>
            </div>
            <div id="divleader">
                <li class="atual"><a href="#">Leaderboard</a></li>
            </div>
            <div id="divlogin">
            <li><a href="login.html">Logar</a></li>
            </div>
            <div id="divcadastro">
            <li><a href="cadastro.html">Cadastrar</a></li>
            </div>
            <div id="botaoSair">
            <li><a onclick="sair()">Sair</a></li>
            </div>
            </ul>
        </div>
    </header>
    <div class="container-leaderboard">
        <div class="kpis-card">
            <div id="kpis"><h1>Melhor Jogador</h1>
                <div id="melhorJogador"></div>
            </div>
            <div id="kpis"><h1>Média de Acertos</h1>
                <div id="mediaAcertos"></div>
            </div>
            <div id="kpis"><h1>Tempo Médio</h1>
                <div id="tempoMedio"></div>
            </div>
        </div>
        <div class="graficoChart">
            <canvas id="myChart"></canvas>
        </div>
    </div>
    <script>
      function carregarKPIs() {
        fetch("/quiz/kpis").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    throw "Nenhum resultado encontrado!!";
                }

                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));
                    melhorJogador.innerHTML = `${resposta[0].Melhor_Jogador}`
                    mediaAcertos.innerHTML = `${resposta[0].Média_de_acertos}`
                    tempoMedio.innerHTML = `${resposta[0].Tempo_Médio}`
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta)
        });
    }


// GRÁFICO CHART.JS
const ctx = document.getElementById('myChart');

new Chart(ctx, {
  type: 'bar',
  data: {
    labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
    datasets: [{
      label: '# of Votes',
      data: [12, 19, 3, 5, 2, 3],
      borderWidth: 1
    }]
  },
  options: {
    scales: {
      y: {
        beginAtZero: true
      }
    }
  }
});
    </script>

    